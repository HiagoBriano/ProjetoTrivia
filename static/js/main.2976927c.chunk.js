(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{33:function(e,t,a){e.exports=a.p+"static/media/trivia-01.8397b8e7.png"},34:function(e,t,a){e.exports=a.p+"static/media/engrenagem3.9c8463bf.svg"},39:function(e,t,a){e.exports=a(73)},44:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},54:function(e,t){},55:function(e,t,a){},56:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),o=(a(44),a(24)),l=a(12),i=a(3),u=a(4),m=a(6),p=a(5),d=a(2),b=a(9),f=a.n(b),h=a(13),E=a(20);function g(e){return{type:"GET_TOKEN",payload:e}}var v=function(){var e=Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://opentdb.com/api_token.php?command=request",e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,localStorage.setItem("token",a.token),e.abrupt("return",a.token);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://opentdb.com/api.php?amount=5&token=".concat(t),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=3,e.next=3,y(t);case 3:if((n=e.sent).response_code!==a){e.next=13;break}return e.next=7,v();case 7:return g(r=e.sent),e.next=11,k(r);case 11:return c=e.sent,e.abrupt("return",c);case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=a(33),j=a.n(O),w=(a(51),a(34)),N=a.n(w),x=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onChangeHandler=function(e){var t=e.name,a=e.value;n.setState(Object(E.a)({},t,a),(function(){n.btnCheck()}))},n.btnCheck=function(){var e=n.state,t=e.playerName,a=e.playerEmail;0!==t.length&&/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(a)?n.setState({btnDisabled:!1}):n.setState({btnDisabled:!0})},n.onClickHandler=Object(h.a)(f.a.mark((function e(){var t,a,r,c,s,o,l,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.setToken,r=t.setUser,c=t.history,e.next=3,v();case 3:return s=e.sent,e.next=6,a(s);case 6:o=n.state,l=o.playerName,i=o.playerEmail,r(l,i),c.push("/jogo");case 9:case"end":return e.stop()}}),e)}))),n.state={btnDisabled:!0,playerName:"",playerEmail:""},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.btnDisabled,n=t.playerName,c=t.playerEmail,s=this.props.history;return r.a.createElement("div",{className:"login"},r.a.createElement("header",{className:"login--header"},r.a.createElement("img",{src:j.a,className:"login--logo",alt:"logo"})),r.a.createElement("main",{className:"login--container"},r.a.createElement("form",{className:"login--form"},r.a.createElement("div",{className:"login--form-group"},r.a.createElement("input",{className:"login--form-control",placeholder:"username",type:"text",id:"player-name",name:"playerName","data-testid":"input-player-name",value:n,onChange:function(t){return e.onChangeHandler(t.target)}}),r.a.createElement("label",{htmlFor:"player-name",className:"login--form-label"},"Nome do jogador")),r.a.createElement("div",{className:"login--form-group"},r.a.createElement("input",{className:"login--form-control",placeholder:"e-mail",type:"text",id:"player-email",name:"playerEmail","data-testid":"input-gravatar-email",value:c,onChange:function(t){return e.onChangeHandler(t.target)}}),r.a.createElement("label",{htmlFor:"player-email",className:"login--form-label"},"E-mail do jogador")),r.a.createElement("button",{type:"button",className:"login--button","data-testid":"btn-play",disabled:a,onClick:function(){e.onClickHandler()}},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),"Play"),r.a.createElement("button",{className:"login--config-btn",type:"button","data-testid":"btn-settings",onClick:function(){return s.push("/config")}},r.a.createElement("img",{src:N.a,alt:"configura\xe7\xe3o",title:"Configura\xe7\xf5es"})))))}}]),a}(n.Component),S=Object(l.b)(null,(function(e){return{setToken:function(t){return e(g(t))},setUser:function(t,a){return e(function(e,t){return{type:"GET_USER",name:e,email:t}}(t,a))}}}))(x),C=(a(52),a(21)),T=a.n(C),A=(a(55),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.userName,a=e.email,n=e.score,c=T()(a).toString(),s="https://www.gravatar.com/avatar/".concat(c);return r.a.createElement("div",{id:"header"},r.a.createElement("img",{className:"image-user","data-testid":"header-profile-picture",src:s,alt:"Imagem do jogador"}),r.a.createElement("section",{className:"name-and-score"},r.a.createElement("section",{className:"name-and-score-internal"},r.a.createElement("div",{className:"player-score-header"},r.a.createElement("p",null,"Jogador: ",t," "),r.a.createElement("p",null,"Pontos: ",n," ")))))}}]),a}(n.Component)),q=Object(l.b)((function(e){return{userName:e.player.name,email:e.player.gravatarEmail,score:e.player.score}}))(A),I=a(38),_=(a(56),a(22)),R=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).startTimer=function(){n.counter=setInterval((function(){var e=n.state.timer;e>0&&n.setState({timer:e-1}),0===e&&n.stopTimer()}),1e3)},n.stopTimer=function(){n.setState({resposta:!0,btnDisabled:!0}),clearInterval(n.counter)},n.getQuestions=Object(h.a)(f.a.mark((function e(){var t,a,r,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.token,e.next=3,k(t);case 3:a=e.sent,n.setState({questions:a.results,haveOptions:!0}),r=n.state,c=r.questions,s=r.counter,n.prepareAnswers(c[s].correct_answer,c[s].incorrect_answers),n.setState({questions:a.results,haveOptions:!0});case 8:case"end":return e.stop()}}),e)}))),n.answerSelected=function(e){var t=e.target;n.setState({resposta:!0}),"correct-answer"===t.name&&n.playerScore(),n.stopTimer()},n.nextQuestion=function(){var e=n.state,t=e.questions,a=e.atualQuestion,r=n.props.history;a<t.length-1?(n.setState((function(e){return{atualQuestion:e.atualQuestion+1,counter:e.counter+1,resposta:!1,timer:30,btnDisabled:!1}}),(function(){var e=n.state.counter;n.prepareAnswers(t[e].correct_answer,t[e].incorrect_answers)})),n.renderAnswers(),n.startTimer()):r.push("/feedback")},n.embaralhar=function(e){for(var t=e.length-1;t>0;t-=1){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e},n.prepareAnswers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[].concat(Object(I.a)(t),[e]),r=a.map((function(e,t){return a.length-1===t?{resposta:e,certa:!0,classe:"buttonGreen"}:{resposta:e,certa:!1,classe:"buttonRed"}})),c=n.embaralhar(r);n.setState({misturado:c})},n.renderAnswers=function(){var e=n.state,t=e.questions,a=e.counter,c=e.misturado,s=e.resposta,o=e.btnDisabled;return r.a.createElement("div",{className:"pag-questions"},r.a.createElement("h2",{class:"question-category","data-testid":"question-category"},Object(_.a)(t[a].category)),r.a.createElement("h3",{class:"question-text","data-testid":"question-text"},Object(_.a)(t[a].question)),r.a.createElement("section",{"data-testid":"answer-options"},c.map((function(e,t){return r.a.createElement("div",{class:"choice-container"},r.a.createElement("button",{key:t,type:"button",name:e.certa?"correct-answer":"wrong-answer-".concat(t),"data-testid":e.certa?"correct-answer":"wrong-answer-".concat(t),disabled:o,className:s?e.classe:"choice-text",onClick:function(e){return n.answerSelected(e)},id:"botao-questions"},Object(_.a)(e.resposta)))}))))},n.state={questions:["a"],atualQuestion:0,counter:0,resposta:!1,timer:30,btnDisabled:!1,misturado:[],haveOptions:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getQuestions(),this.startTimer()}},{key:"playerScore",value:function(){var e=this.state,t=e.questions,a=e.counter,n=e.timer,r=this.props,c=r.setPoints,s=r.setAssertions;c(10+("easy"===t[a].difficulty?1:"medium"===t[a].difficulty?2:3)*n),s(1)}},{key:"render",value:function(){var e=this.state,t=e.resposta,a=e.haveOptions,n=e.timer;return r.a.createElement("section",null,r.a.createElement("section",{class:"container"},r.a.createElement("section",{class:"position-circular"},n<=30&&n&&!t?r.a.createElement("div",{class:"circular"},r.a.createElement("div",{class:"inner"}),r.a.createElement("div",{class:"outer"}),r.a.createElement("div",{class:"numb"},n),r.a.createElement("div",{class:"circle"},r.a.createElement("div",{class:"dot"},r.a.createElement("span",null)),r.a.createElement("div",{class:"bar left"},r.a.createElement("div",{class:"progress"})),r.a.createElement("div",{class:"bar right"},r.a.createElement("div",{class:"progress"})))):r.a.createElement("div",{class:"circular danger"},r.a.createElement("div",{class:"inner"}),r.a.createElement("div",{class:"outer"}),r.a.createElement("div",{class:"numb"},n))),a?r.a.createElement("div",{class:"container-internal"},this.renderAnswers()):r.a.createElement("p",null,"Carregando"),t&&r.a.createElement("button",{class:"btn-questions",type:"button","data-testid":"btn-next",onClick:this.nextQuestion},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),"Next")))}}]),a}(n.Component),D=Object(l.b)((function(e){return{token:e.token}}),(function(e){return{setToken:function(t){return e(g(t))},setPoints:function(t){return e(function(e){return{type:"PLAYER_POINT",payload:e}}(t))},setAssertions:function(t){return e(function(e){return{type:"PLAYER_ASSERTIONS",payload:e}}(t))}}}))(R),P=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("div",null,r.a.createElement(q,null),r.a.createElement(D,{history:e}))}}]),a}(n.Component),Q=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"settings-title"},"Settings")}}]),a}(n.Component),J=(a(68),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).saveRankingLs=function(){var t=e.props,a=t.score,n=t.name,r=t.email,c=T()(r).toString(),s="https://www.gravatar.com/avatar/".concat(c);if(localStorage.getItem("ranking")){var o=JSON.parse(localStorage.getItem("ranking"));o.push({name:n,score:a,picture:s}),localStorage.setItem("ranking",JSON.stringify(o))}else localStorage.setItem("ranking",JSON.stringify([{name:n,score:a,picture:s}]))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.saveRankingLs()}},{key:"render",value:function(){var e=this.props,t=e.score,a=e.assertions,n=e.history;return r.a.createElement("div",null,r.a.createElement(q,null),r.a.createElement("section",{className:"feedback-box"},a>=3?r.a.createElement("h2",{"data-testid":"feedback-text",className:"title"},"Well Done!"):r.a.createElement("h2",{"data-testid":"feedback-text",className:"title"},"Could be better..."),r.a.createElement("label",{htmlFor:"pontua\xe7\xe3o",className:"score"},"Pontua\xe7\xe3o",r.a.createElement("h2",{"data-testid":"feedback-total-score",id:"pontua\xe7\xe3o"},t)),r.a.createElement("label",{htmlFor:"Acertos",className:"score"},"Acertos",r.a.createElement("h2",{"data-testid":"feedback-total-question",id:"Acertos"},a))),r.a.createElement("section",{className:"button-container"},r.a.createElement("button",{className:"botao",type:"button","data-testid":"btn-play-again",onClick:function(){return n.push("/")}},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),"Play Again"),r.a.createElement("button",{className:"botao","data-testid":"btn-ranking",type:"button",onClick:function(){return n.push("/ranking")}},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),"Ranking")))}}]),a}(n.Component)),L=Object(l.b)((function(e){return{score:e.player.score,assertions:e.player.assertions,name:e.player.name,email:e.player.gravatarEmail}}))(J),M=(a(69),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={ranking:JSON.parse(localStorage.getItem("ranking"))},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.history,t=this.state.ranking;return r.a.createElement("div",{className:"ranking-div"},r.a.createElement("h1",{"data-testid":"ranking-title"},r.a.createElement("center",null,"Ranking")),r.a.createElement("section",{className:"ranking-section"},r.a.createElement("ol",{className:"ranking-lista"},t.sort((function(e,t){return t.score-e.score})).map((function(e,t){var a=e.name,n=e.picture,c=e.score;return r.a.createElement("li",{key:t,className:"ranking-jogador"},r.a.createElement("div",{className:"tamanho-ranking"},0===t?r.a.createElement("img",{src:"https://www.showdomilhao.com.br/static/media/primeiro.4ca9d46c.webp"}):null,1===t?r.a.createElement("img",{src:"https://www.showdomilhao.com.br/static/media/segundo.b6d2518e.webp"}):null,2===t?r.a.createElement("img",{src:"https://www.showdomilhao.com.br/static/media/terceiro.f53712d5.webp"}):null,t>2?r.a.createElement("span",null,"".concat(t+1,"\xb0")):null),r.a.createElement("div",{className:"tamanho-ranking"},r.a.createElement("img",{src:n,alt:"player",className:"ranking-foto",width:"30px",height:"30px"})),r.a.createElement("div",{className:"tamanho-ranking"},r.a.createElement("span",{"data-testid":"player-name-".concat(t)},a)),r.a.createElement("div",{className:"tamanho-ranking"},r.a.createElement("span",{"data-testid":"player-score-".concat(t)},c)))})))),r.a.createElement("center",null,r.a.createElement("a",{"data-testid":"btn-go-home",type:"button",onClick:function(){return e.push("/")},className:"ranking-botao"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("center",null,"Inicio"))))}}]),a}(n.Component)),G=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:S}),r.a.createElement(d.a,{exact:!0,path:"/jogo",component:P}),r.a.createElement(d.a,{exact:!0,path:"/config",component:Q}),r.a.createElement(d.a,{exact:!0,path:"/feedback",component:L}),r.a.createElement(d.a,{exact:!0,path:"/ranking",component:M}))}}]),a}(r.a.Component),H=a(16),F=a(36),U=a(37),Y=a(14),K={name:"",assertions:0,score:0,gravatarEmail:""},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return Object(Y.a)(Object(Y.a)({},e),{},{name:t.name,gravatarEmail:t.email,score:0,assertions:0});case"PLAYER_POINT":return Object(Y.a)(Object(Y.a)({},e),{},{score:e.score+t.payload});case"PLAYER_ASSERTIONS":return Object(Y.a)(Object(Y.a)({},e),{},{assertions:e.assertions+t.payload});default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOKEN":return t.payload;default:return e}},$=Object(H.combineReducers)({player:W,token:B}),z=Object(H.createStore)($,Object(F.composeWithDevTools)(Object(H.applyMiddleware)(U.a)));window.Cypress&&(window.store=z);var V=z;s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{basename:"/projeto-trivia"},r.a.createElement(l.a,{store:V},r.a.createElement(G,null)))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2976927c.chunk.js.map